(function(){const a={};a.parseUA=function(){var c=navigator.userAgent;var d=navigator.userAgent.toLowerCase();var e=d.match(/MicroMessenger/i)=="micromessenger";var b=e||(!!c.match(/(iPhone|iPod|Android|ios|Mobile)/i));return{mobile:b,pc:!b,ios:!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:c.indexOf("Android")>-1,weixin:e,newsapp:c.indexOf("NewsApp")>-1,yixin:c.indexOf("YiXin")>-1,weibo:c.indexOf("weibo")>-1,yunyuedu:c.indexOf("PRIS")>-1,cloudmusic:d.indexOf("neteasemusic")>-1}};a.pc_code=function(){var c=a.parseUA().pc;if(c){if(document.body.getAttribute("code")=="no"){return}var d=document.createElement("div");d.id="pc-qrcode";d.style.cssText="width:100%;height:100%;position:fixed;left:0px;top:0px;z-index:9999999;background:#fff;";var e=document.createElement("img");e.style.cssText="width:300px;height:300px;position:fixed;top:50%;left:50%;margin-left:-150px;margin-top:-220px;";e.setAttribute("src","http://tool.oschina.net/action/qrcode/generate?data="+encodeURIComponent(location.href)+"&output=image%2Fgif&error=L&type=0&margin=4&size=4");d.appendChild(e);var b=document.createElement("p");b.style.cssText="width:300px;height:300px;position:fixed;top:50%;left:50%;margin-left:-150px;margin-top:80px;text-align:center;font-size:19px;font-weight:bold;";d.appendChild(b);document.body.appendChild(d)}if(console.group){console.group(location.href)}console.log("%c ","opacity:.6;display:block;padding:50px;background:url('http://tool.oschina.net/action/qrcode/generate?data="+encodeURIComponent(location.href)+"&output=image%2Fgif&error=L&type=0&margin=4&size=4') no-repeat;background-size:contain;");if(console.group){console.groupEnd()}};a.landscape=function(){var b=document.createElement("div");b.className="landscape";b.style.cssText="width:100%;height:100%;position:fixed;left:0px;top:0px;z-index:999999999;background:#000 url(//go.163.com/2015/public/common/image/tip2.png) no-repeat center center;display:none;";setTimeout(function(){document.body.appendChild(b)},200);function c(){if(document.body.getAttribute("landscape")=="no"){return}if(window.orientation===180||window.orientation===0){setTimeout(function(){b.style.display="none"},250)}if(window.orientation===90||window.orientation===-90){setTimeout(function(){b.style.display="block"},250)}}c();window.addEventListener("onorientationchange" in window?"orientationchange":"resize",c,false)};a.jsLoad=function(b,j){var d=b;var c=[];var g=function(i,l){if(!f(c,i)){var k=document.createElement("script");k.type="text/javascript";k.src=i;l=l||function(){};k.onload=k.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState){l();c.push(i)}};document.body.appendChild(k)}else{l()}};var f=function(l,n){if(l!=null&&l.length>0){var k=l.length;for(var m=0;m<k;m++){if(l[m]==n){return true}}}return false};if(d.length>0){var h=0;for(var e=0;e<d.length;e++){g(d[e],function(){h++;if(h==d.length){if(typeof j=="function"){j()}}})}}};a.share_survey=function(h){var i=window.location;var e=a.parseUA();if(i.host.search(/163\.com/)<0||i.href.indexOf("test.go.163")>-1){return false}var g="init";var b="";var d="";if(e.newsapp){g="newopen";d="newsapp";b="新闻客户端分享"}else{if(e.weixin){g="weixinopen";d="weixin";b="微信分享"}else{if(e.yixin){g="yixinopen";d="yixin";b="易信分享"}else{if(e.weibo){g="weiboopen";d="weibo";b="微博分享"}else{if(e.cloudmusic){g="musicopen";d="cloudmusic";b="云音乐分享"}}}}}if(e.pc){g="pc";b="其他";d="qita"}if(h){g+="_share";a.addTracker(d+"_share",b)}g=encodeURIComponent(g);var c=encodeURIComponent(i.href.split("?")[0]);var f=new Image();f.src="//go.163.com/api/common/shareh5.php?act=shareMessage&t="+g+"&url="+c+"&random="+new Date().getTime()};a.survey=function(){var c=window.location.href.search(/go\.163\.com|activity\.music\.163\.com/)>=0;var b=["//analytics.163.com/ntes.js"];if(c){a.jsLoad(b,function(){_ntes_nacc="minisites";neteaseTracker()})}};a.ant=function(){(function(b,h,e,i){var g=h.getElementsByTagName(e)[0],c=h.createElement(e);c.async=true;c.src="//static.ws.126.net/163/frontend/antnest/"+i+".js";g.parentNode.insertBefore(c,g)})(window,document,"script","NTM-X8TTNZW2-3")};a.share=function(){var d=a.parseUA();window.NeteaseShareInit=function(){if(d.weixin){c()}else{if(d.cloudmusic){var i=["//res.wx.qq.com/open/js/jweixin-1.4.0.js","//s3.music.126.net/static/mob/ntes.id.js","//s5.music.126.net/static_public/5cdd11024e4a3f3e479d1930/music-jssdk-2.0.9.js"];a.jsLoad([i[0]],function(){a.jsLoad([i[1]],function(){a.jsLoad([i[2]],function(){NeteaseShareUpdate()})})})}else{NeteaseShareUpdate()}}};window.NeteaseShareUpdate=function(){f();h();e();g();b()};window.NeteaseShare=function(j,i){NeteaseShareUpdate();if(d.yixin){if(j){j()}}else{if(d.newsapp){window.location="share://"}else{if(d.cloudmusic){if(yyy){yyy.share()}}else{if(d.weixin){if(j){j()}}else{if(d.yunyuedu){window.open(window.shareData.yuedu)}else{if(i){if(j){j()}}else{window.open(window.shareData.sina)}}}}}}};var f=function(){window.shareData.imgUrl=window.shareData.MsgImg;window.shareData.tImgUrl=window.shareData.MsgImg;
window.shareData.fImgUrl=window.shareData.MsgImg;window.shareData.wImgUrl=window.shareData.MsgImg;window.shareData.timeLineLink=window.shareData.link;window.shareData.sendFriendLink=window.shareData.link;window.shareData.weiboLink=window.shareData.link;window.shareData.tTitle=window.shareData.fText;window.shareData.fTitle=window.shareData.title;window.shareData.tContent=window.shareData.fText;window.shareData.fContent=window.shareData.desc;window.shareData.wContent=window.shareData.desc};var h=function(){window.shareData.yuedu="web:getclientsharemodule;data="+encodeURIComponent('{"activityId":"'+(window.shareData.activityId||"")+"\",\"moduleType\":\"['_share_weixin','_share_weixinquan','_share_yixin','_share_yixinquan','_share_tsina','_share_qzone']\",\"site\":\"网易云阅读官方网站\","+'"url":"'+window.shareData.link+'","title":"'+window.shareData.title+'","pics":"'+window.shareData.MsgImg+'",'+'"summary":"'+window.shareData.desc+'","shareType":"1","data":{"activityId":"'+(window.shareData.activityId||"")+'"}}');if(window.active){window.active.shareCompleted=window.shareData.callback}};var e=function(){if(d.cloudmusic){yyy.setShareData({name:document.title,title:window.shareData.title,subTitle:window.shareData.desc,text:window.shareData.fText,picUrl:window.shareData.MsgImg,link:window.shareData.link});yyy.onShare(function(j,i){window.shareData.callback()})}};var g=function(){if(document.getElementById("__newsapp_sharetext")){document.getElementById("__newsapp_sharetext").innerHTML=window.shareData.desc+window.shareData.link;document.getElementById("__newsapp_sharephotourl").innerHTML=window.shareData.MsgImg;document.getElementById("__newsapp_sharewxtitle").innerHTML=window.shareData.title;document.getElementById("__newsapp_sharewxtext").innerHTML=window.shareData.desc;document.getElementById("__newsapp_sharewxurl").innerHTML=window.shareData.link;document.getElementById("__newsapp_sharewxthumburl").innerHTML=window.shareData.MsgImg}else{var o=document.createElement("div");o.style.display="none";var k=document.createElement("code");k.innerHTML=window.shareData.desc+window.shareData.link;k.id="__newsapp_sharetext";o.appendChild(k);var l=document.createElement("code");l.innerHTML=window.shareData.MsgImg;l.id="__newsapp_sharephotourl";o.appendChild(l);var i=document.createElement("code");i.innerHTML=window.shareData.title;i.id="__newsapp_sharewxtitle";o.appendChild(i);var n=document.createElement("code");n.innerHTML=window.shareData.desc;n.id="__newsapp_sharewxtext";o.appendChild(n);var m=document.createElement("code");m.innerHTML=window.shareData.link;m.id="__newsapp_sharewxurl";o.appendChild(m);var j=document.createElement("code");j.innerHTML=window.shareData.MsgImg;j.id="__newsapp_sharewxthumburl";o.appendChild(j);document.body.appendChild(o)}window.__newsapp_share_done=window.shareData.callback};var c=function(){var i=function(){WeixinJSBridge.call("showOptionMenu");WeixinJSBridge.call("hideToolbar");WeixinJSBridge.on("menu:share:appmessage",function(j){WeixinJSBridge.invoke("sendAppMessage",{"appid":window.shareData.appId,"img_url":window.shareData.MsgImg,"img_width":"120","img_height":"120","link":window.shareData.link,"desc":window.shareData.desc,"title":window.shareData.title},window.shareData.callback)});WeixinJSBridge.on("menu:share:timeline",function(j){(shareData.callback)();WeixinJSBridge.invoke("shareTimeline",{"img_url":window.shareData.MsgImg,"img_width":"120","img_height":"120","link":window.shareData.link,"desc":window.shareData.fText,"title":window.shareData.fText},window.shareData.callback)})};if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",i,false)}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",i);document.attachEvent("onWeixinJSBridgeReady",i)}}};var b=function(){window.shareData.sina="//v.t.sina.com.cn/share/share.php?url="+encodeURIComponent(window.shareData.link)+"&title="+encodeURIComponent(window.shareData.fText)+"&content=utf8&pic="+encodeURIComponent(window.shareData.MsgImg)}};a.getPara=function(e){var d=location.search;var c=new RegExp("[&|?]"+e+"=([^&$]*)","gi");var b=c.test(d);return b?RegExp.$1:""};a.autoPlay=function(c){function b(d){document.removeEventListener("WeixinJSBridgeReady",b,false);document.removeEventListener("YixinJSBridgeReady",b,false);document.removeEventListener("touchstart",b,false);switch(typeof(c)){case"string":document.getElementById(c).play();break;case"object":c.play();break;case"function":c(d);break}}document.addEventListener("WeixinJSBridgeReady",b,false);document.addEventListener("YixinJSBridgeReady",b,false);document.addEventListener("touchstart",b,false);if(window.netease.ua.ios&&window.netease.ua.newsapp){b()}};a.addTracker=function(d,b){if(window.neteaseTracker){const c=document.location.href.match(/\d+_\w+/)[0];neteaseTracker(false,"http://minisite.click.163.com/"+c+"/"+d,b,"minisiteclick")}};a.addVConsole=function(){const c=a.parseUA();const d=window.location.href.search(/test\.go\.163\.com|192\.|10\./)>-1;
const e=!(navigator.platform.indexOf("Win")===0||navigator.platform.indexOf("Mac")===0);if(!e){return}const b=a.getPara("vconsole");if((c.mobile&&d&&b!=="false")||b==="true"){a.jsLoad(["//cdn.bootcss.com/vConsole/3.3.0/vconsole.min.js"],function(){var f=new VConsole()})}};a.init=function(){window.netease=a;window.netease.ua=a.parseUA();a.landscape();a.survey();a.ant();window.share_survey=a.share_survey;share_survey();a.pc_code();a.share();a.addVConsole()};a.init()})();